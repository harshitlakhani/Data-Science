      Grid indices overflow bug fix (#1313) 
         cv2.rectangle(mosaic, (block_x, block_y), (block_x + w, block_y + h), (255, 255, 255), thickness=3)        if fname is not None:         mosaic = cv2.resize(mosaic, (int(ns * w * 0.5), int(ns * h * 0.5)), interpolation=cv2.INTER_AREA)         r = min(1280. / max(h, w) / ns, 1.0)  # ratio to limit image size         mosaic = cv2.resize(mosaic, (int(ns * w * r), int(ns * h * r)), interpolation=cv2.INTER_AREA)          # cv2.imwrite(fname, cv2.cvtColor(mosaic, cv2.COLOR_BGR2RGB))  # cv2 save          Image.fromarray(mosaic).save(fname)  # PIL save      return mosaic 

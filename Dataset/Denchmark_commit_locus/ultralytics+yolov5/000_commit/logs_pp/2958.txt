cache improved corrupt image label reporting cache improved corrupt image label reporting fix https github com ultralytics yolov issues issuecomment cleanup
def cache labels cachelabels self path path labels cache prefix cache dataset labels check images read shapes dict number missing found empty corrupt msgs number missing found empty corrupt messages desc prefix scanning path parent path stem images labels pool num threads numthreads pool pbar tqdm pool imap unordered imapunordered verify image label verifyimagelabel zip self img files imgfiles self label files labelfiles repeat prefix desc desc total len self img files imgfiles file imfile shape segments nmf nff nef ncf pbar file imfile shape segments nmf nff nef ncf msg pbar nmf nff nef ncf file imfile xim file ximfile shape segments msg msgs append msg pbar desc desc found missing empty corrupted pbar close msgs logging info join msgs logging info prefix warning labels found path see help url helpurl hash get hash gethash self label files labelfiles self img files imgfiles results len self img files imgfiles version cache version msgs msgs warnings version cache version try torch save path save cache next time logging info prefix new cache created path

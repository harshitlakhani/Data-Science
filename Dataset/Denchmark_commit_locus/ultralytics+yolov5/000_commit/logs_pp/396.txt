initial commit
file contains google utils https cloud google com storage docs reference libraries pip install upgrade google cloud storage googlecloudstorage google cloud import storage import import time pathlib import path def attempt download attemptdownload weights attempt download pretrained weights found locally weights weights strip msg weights missing try downloading https drive google com open lez bicq euz lezfggbcwiyavbicqeuzde len weights path isfile weights yolov spp yolovspp nwf hmjde mmonwfzoiolcmhhmjdeni yolov spp yolovspp yaml yolovs iyyl lwg nmswhc mqo rtriyyllwgfxnmswhchtmqo yolovs yaml yolovm vobu exp exs mbf vobueexpwqvpxexsjwmbfhjjwkqjr yolovm yaml yolovl hrlq wdei jwn nev hrlqdwdeiutogtbekjwnsvnev yolovl yaml yolovx abe mmazjlwtxogbzjvnumrtnaabecvzs yolovx yaml file path weights name file gdrive download gdrivedownload dfile name weights error check path exists weights path getsize weights weights exist system weights remove partial downloads raise exception msg def gdrive download gdrivedownload xkefzylv ygdm ajcbf haxkefzylvuncygdmeajcbfwo name coco zip https gist github com tanaikech ffdebffccf downloads file google drive accepting presented query utils google utils googleutils import gdrive download gdrivedownload time time print downloading https drive google com export downloadid name end remove name path exists name else none remove existing remove cookie path exists cookie else none attempt file download system curl cookie https drive google com export downloadid dev null path exists cookie large file curl cookie https drive google com export downloadconfirm awk download print cookieid name else small file curl https drive google com export downloadid name system execute capture return values remove cookie path exists cookie else none error check remove name path exists name else none remove partial print download error raise exception download error return unzip archive name endswith zip print unzipping end system unzip name unzip remove name remove zip free space print done time time return def upload blob uploadblob bucket name bucketname source file name sourcefilename destination blob name destinationblobname uploads file bucket https cloud google com storage docs uploading objectsstorage upload object python uploadingobjectsstorageuploadobjectpython storage client storageclient storage client bucket storage client storageclient get bucket getbucket bucket name bucketname blob bucket blob destination blob name destinationblobname blob upload filename uploadfromfilename source file name sourcefilename print file uploaded format source file name sourcefilename destination blob name destinationblobname def download blob downloadblob bucket name bucketname source blob name sourceblobname destination file name destinationfilename uploads blob bucket storage client storageclient storage client bucket storage client storageclient get bucket getbucket bucket name bucketname blob bucket blob source blob name sourceblobname blob download filename downloadtofilename destination file name destinationfilename print blob downloaded format source blob name sourceblobname destination file name destinationfilename

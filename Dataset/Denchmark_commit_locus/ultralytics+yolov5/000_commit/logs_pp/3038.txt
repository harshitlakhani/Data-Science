parse url authentication parse url authentication urllib parse unquote improved error handling improved error handling remove update check file checkfile
def safe download safedownload file url url none min bytes minbytes error msg errormsg attempts download file url url checks removes incomplete downloads min bytes minbytes check except exception gcp assert file exists file stat size stsize min bytes minbytes assert msg assertmsg check except exception url file unlink missing missingok true remove partial downloads print download error attempting nreattempting url url file print error attempting nreattempting url url file system curl url url file retry curl download retry resume fail finally file exists file stat size stsize name name split parse authentication https url com file txt auth safe download safedownload file name url url min bytes minbytes return name

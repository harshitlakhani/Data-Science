use multi threading multithreading cache labels cachelabels use multi threading cache labels cachelabels pep reformat add num threads numthreads changed thread pool threadpool imap unordered imapunordered pool imap unordered imapunordered remove inplace additions update datasets refactor initial desc authored coauthoredby glenn jocher
annotated annotatedonly path imglabel paths imglabelpaths str img exists check label open path txti write str img add image txt file def verify image label verifyimagelabel params verify one image label imagelabel pair file imfile file lbfile prefix params number missing found empty corrupt try verify images image open file imfile verify pil verify shape exif size exifsize image size segments instance segments assert shape shape image size shape segment classes array dtype float segments array dtype float reshape cls concatenate classes reshape segmentsboxes segments cls xywh array dtype float len assert shape labels require columns assert negative labels assert non normalized nonnormalized bounds coordinate labels assert unique axis shape shape duplicate labels else label empty zeros dtype float else label missing zeros dtype float return file imfile shape segments except exception logging info prefix warning ignoring corrupted image label file imfile return none

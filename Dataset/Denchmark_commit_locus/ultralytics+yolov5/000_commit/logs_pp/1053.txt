refactor code reduce duplication
def init self path img size imgsize batch size batchsize augment false hyp none rect false image weights imageweights false cache images cacheimages false single cls singlecls false stride pad try type path list multiple datasets handler subpath path subpath path isinstance path list else path subpath str path subpath agnostic osagnostic parent str path subpath parent sep path isfile subpath file open subpath subpath str path subpath agnostic osagnostic parent str path subpath parent sep read splitlines replace parent startswith else local global path path str path path treat multiple datasets single else path str path path agnostic osagnostic parent str path path parent sep path isfile path file open path read splitlines replace parent startswith else local global path elif path isdir path folder glob iglob path sep elif path isdir subpath folder glob iglob subpath sep maybe change glob glob allow handling also multiple folders else raise exception exist path raise exception exist subpath self img files imgfiles replace sep path splitext lower img formats imgformats except maybe avoid handling bare exceptions raise exception error loading data see path help url helpurl still need compatibility npy shape file saves isinstance path list path str path path else path str path path len self img files imgfiles assert images found see path help url helpurl floor arange batch size batchsize astype int batch index

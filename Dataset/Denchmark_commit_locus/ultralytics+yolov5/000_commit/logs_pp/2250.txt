torch pytorch update native amp torch pytorch automatic mixed precision amp training fixed problem inconsistent code length indentation fixed problem inconsistent code length indentation mixed precision training turned default
open opt hyp hyp update yaml load loader yaml full loader fullloader update hyps opt img size imgsize extend opt img size imgsize len opt img size imgsize extend sizes train test device torch utils torchutils select device selectdevice opt device apex mixed precision mixedprecision batch size batchsize opt batch size batchsize device torch utils torchutils select device selectdevice opt device batch size batchsize opt batch size batchsize opt total batch size totalbatchsize opt batch size batchsize opt world size worldsize device type cpu mixed precision mixedprecision false elif opt local rank localrank ddp mode ddp mode opt local rank localrank assert torch cuda device count devicecount opt local rank localrank torch cuda set device setdevice opt local rank localrank device torch device cuda opt local rank localrank dist init process group initprocessgroup backend nccl init method initmethod env distributed backend opt world size worldsize dist get world size getworldsize assert opt batch size batchsize opt world size worldsize batch size multiple number devices given opt batch size batchsize opt total batch size totalbatchsize opt world size worldsize print opt train

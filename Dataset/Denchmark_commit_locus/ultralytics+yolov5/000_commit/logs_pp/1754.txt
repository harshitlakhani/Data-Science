increase pycocotools robustness
save json save json savejson len jdict path weights isinstance weights list else weights stem weights none else weights file save dir savedir detections val detectionsval results json predicted annotations file print coco ncoco map pycocotools saving file open file anno json annojson glob glob coco annotations instances val instancesval json annotations json pred json predjson str save dir savedir predictions json predictions json print evaluating nevaluating pycocotools map saving pred json predjson open pred json predjson json dump jdict try https github com cocodataset cocoapi blob master python api pythonapi pycoco eval demo pycocoevaldemo ipynb pycocotools coco import coco pycocotools cocoeval import coc oeval cocoeval img ids imgids int path stem dataloader dataset img files imgfiles coco anno cocoanno coco glob glob coco annotations instances val instancesval json initialize coco annotations api coco pred cocopred coco anno cocoanno load res loadres str file initialize coco pred api coco eval cocoeval coc oeval cocoeval coco anno cocoanno coco pred cocopred bbox coco eval cocoeval params img ids imgids img ids imgids image ids evaluate coco eval cocoeval evaluate coco eval cocoeval accumulate coco eval cocoeval summarize map map coco eval cocoeval stats update results map map anno coco anno json annojson init annotations api pred anno load res loadres pred json predjson init predictions api eval coc oeval cocoeval anno pred bbox coco iscoco eval params img ids imgids int path stem dataloader dataset img files imgfiles image ids evaluate eval evaluate eval accumulate eval summarize map map eval stats update results map map except exception print error pycocotools unable run
